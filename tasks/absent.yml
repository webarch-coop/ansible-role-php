---
- name: PHP packages absent
  block:

    - name: "PHP {{ version }} packages absent"
      ansible.builtin.apt:
        pkg: "php{{ version }}*"
        state: absent
        purge: true
        autoclean: true
        autoremove: true

    - name: "PHP {{ version }} config files absent"
      ansible.builtin.file:
        path: "/etc/php/{{ version }}/"
        state: absent

  tags:
    - php
...
